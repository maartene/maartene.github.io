<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="referrer" content="same-origin" />
		<meta name="robots" content="index, follow" />
		<meta name="generator" content="RapidWeaver" />
		<link rel="apple-touch-icon" sizes="180x180" href="https://www.thedreamweb.eu/resources/large.png" />
<link rel="apple-touch-icon" sizes="167x167" href="https://www.thedreamweb.eu/resources/medium.png" />
<link rel="icon" type="image/png" href="https://www.thedreamweb.eu/resources/logo_64px.png" sizes="64x64" />
<link rel="icon" type="image/png" href="https://www.thedreamweb.eu/resources/favicon_medium.png" sizes="32x32" />
<link rel="apple-touch-icon" sizes="152x152" href="https://www.thedreamweb.eu/resources/small.png" />
<link rel="icon" type="image/png" href="https://www.thedreamweb.eu/resources/favicon_small.png" sizes="16x16" />

	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@maarten_engels">
	<meta name="twitter:creator" content="@maarten_engels">
	<meta name="twitter:image" content="https://maartene.github.io/resources/banner_background.png">
	<meta name="twitter:url" content="https:/maartene.github.io/blog/files/swiftui-for-spritekit-games.html">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="thedreamweb.eu">
	<meta property="og:image" content="https://maartene.github.io/resources/banner_background.png">
	<meta property="og:url" content="https:/maartene.github.io/blog/files/swiftui-for-spritekit-games.html">
	

	<title>[Deprecated] SwiftUI as UI for SpriteKit games | Devlog | thedreamweb.eu</title>
	<link rel="stylesheet" type="text/css" media="all" href="../../rw_common/themes/Future/consolidated-3.css?rwcache=681217867" />
		
	
	 <style type="text/css" media="all">/**
 *  Example CSS file that can be used to style Splash HTML output
 *  Copyright (c) John Sundell 2018
 *  MIT license - see LICENSE.md
 */

pre {
    margin-bottom: 1.5em;
    background-color: #1a1a1a;
    padding: 16px 0;
    border-radius: 16px;
}

pre code {
    font-family: monospace;
    display: block;
    padding: 0 20px;
    color: #a9bcbc;
    line-height: 1.4em;
    font-size: 0.95em;
    overflow-x: auto;
    white-space: pre;
    -webkit-overflow-scrolling: touch;
}

pre code .keyword {
    color: #e73289;
}

pre code .type {
    color: #8281ca;
}

pre code .call {
    color: #348fe5;
}

pre code .property {
    color: #21ab9d;
}

pre code .number {
    color: #db6f57;
}

pre code .string {
    color: #fa641e;
}

pre code .comment {
    color: #6b8a94;
}

pre code .dotAccess {
    color: #92b300;
}

pre code .preprocessing {
    color: #b68a00;
}
</style>  <link rel="alternate" type="application/rss+xml" title="thedreamweb.eu Devlog" href="https://maartene.github.io/blog/files/feed.xml" />
<script type="text/javascript" async src="https://maartene.github.io/blog/files/meta.js"></script>

</head>

<!-- This page was created with RapidWeaver from Realmac Software. http://www.realmacsoftware.com -->

<body>
	<nav class="navbar navbar-expand-lg">
		<div class="container">
			<a class="navbar-brand" href="https://maartene.github.io/"><img src="../../rw_common/images/logo.png" width="71" height="70" alt="d{"/> <span class="navbar-title">Development Blog</span></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
			 aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav ml-auto"><li class="nav-item"><a href="../../" rel="" class="nav-link">Home</a></li><li class="nav-item"><a href="../../Gem Stackers/" rel="" class="nav-link">Gem Stackers</a></li><li class="nav-item"><a href="../../TwinkleStar/" rel="" class="nav-link">Twinkle Star</a></li><li class="nav-item"><a href="../../games/" rel="" class="nav-link">Other Games</a></li><li class="nav-item active"><a href="../" rel="" class="nav-link">Devlog</a></li></ul>
			</div>
		</div>
	</nav>

	<header class="hero" id="hero">
        <div class="hero-background"></div>
		<div class="hero-overlay"></div>
		<h1 class="hero-title">
			Development Blog
			<em>(semi)random.thoughts()</em>
		</h1>
	</header>

	<div class="content">
		<section class="main" style="position: relative;">
			<div class="container">
                <div class="row">
                    <div class="col-sm-9 main">
                        	
	<div class="blog-archive-entries-wrapper">
		<div id="unique-entry-id-20" class="blog-entry"><h1 class="blog-entry-title">[Deprecated] SwiftUI as UI for SpriteKit games</h1><div class="blog-entry-date">31-10-2019  Filed in: <span class="blog-entry-category"><a href="category-swift.html">Swift</a></span><span class="blog-entry-category"> | <a href="category-experiments.html">Experiments</a></span></div><div class="blog-entry-summary"><span style="color:#800040;"><em>Update 2020-06-23: in Xcode 12, Apple introduced a native solution for integrating SpriteKit and SwiftUI. Learn more here: </em></span><span style="color:#800040;"><em><a href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-integrate-spritekit-using-spriteview" target="_blank">https://www.hackingwithswift.com/quick-start/swiftui/how-to-integrate-spritekit-using-spriteview</a></em></span><span style="color:#800040;"><em> </em></span><br /><br /><strong>&mdash;&mdash;&mdash;&mdash; Original post follows &mdash;&mdash;&mdash;&mdash;</strong><br />For my HexMap project, I use SwiftUI to create the game's GUI.<br /><br /><img class="imageStyle" alt="Schermafbeelding 2019-10-31 om 21.47.33" src="schermafbeelding-2019-10-31-om-21.47.33.png" width="914" height="734" /><br /><br />In this tutorial, I'll show (with a simpler) example how I integrate SwiftUI and SpriteKit.</div><div class="blog-entry-body"><br /><h2>Why use SwiftUI with SpriteKit?</h2><br />But first, why would you want to do this?<br />Consider the UI for a turn based strategy game. What the UI shows is very much dependent on the state of the game: <br /><ul class="disc"><li>your current technologies determine the buildings in the list you choose your build queue from, </li><li>whether they are enabled depends on the resources you have, </li><li>when you "buy" for an improvement, your "money" should be decreased immediately.</li></ul>And gluing state and UI together is SwiftUI's forte<br /><br />Also, you probably need "lists" and "rows of buttons", all spaced out nicely. SwiftUI has very simple solutions for these kind of UI elements, that take a lot of effort to implement otherwise.<br /><br />So, it can be a good idea to combine SwiftUI and SpriteKit. How do you do this?<br />There are actually two approaches:<br /><ol class="arabic-numbers"><li>The SpriteKit view (<code>SKView</code>) is embedded as a View in SwiftUI;</li><li>The SwiftUI view is a separate view, overlaying the SpriteKit view.</li></ol><br />Here, I demonstrate the <strong>second</strong> <strong>approach</strong>. Mainly, because it's a lot simpler. And it allows you to swap out the SwiftUI GUI for something else if you so choose.<br /><br /><h2>Example project</h2><br />For this tutorial, we'll add a simple UI to the "Stacker" example game you can find on GitHub. We'll use SwiftUI to implement two UI features:<br /><ol class="arabic-numbers"><li>Show the total height of the stack</li><li>A "pause menu"</li></ol><br />First, download the example project from GitHub: <a href="https://github.com/maartene/Stacker" target="_blank">https://github.com/maartene/Stacker</a><br /><br />This project was created for iOS 12.4. To use SwiftUI, it needs to target iOS 13.0 (or higher). Start by setting the target in the project settings:<br /><img class="imageStyle" alt="Set the project target to iOS 13.0 or higher" src="schermafbeelding-2019-10-31-om-21.56.32.png" width="776" height="456" /><br /><br /><h2>Step 1: creating and displaying the SwiftUI view</h2><br />Start by creating a new "SwiftUI View" file in the project (File -> New -> SwiftUI View) and call it "GameUIView". <br /><br /><img class="imageStyle" alt="Choose "SwiftUI View"" src="schermafbeelding-2019-10-31-om-22.00.23.png" width="359" height="258" /><img class="imageStyle" alt="Save as "GameUIView.swift"" src="schermafbeelding-2019-10-31-om-22.00.42.png" width="417" height="224" /><br /><br />For now, leave the new <code>GameUIView.swift</code> file as is.<br /><br />Then, go to <code>GameViewController.swift</code> and add <code>SwiftUI</code> to the imports:<br /><pre><code><span class="keyword">import</span> UIKit<br /><span class="keyword">import</span> SpriteKit<br /><span class="keyword">import</span> GameplayKit<br /><span class="keyword">import</span> SwiftUI</code></pre><br />Finally add the following to <code>override func viewDidLoad()</code> right below the <code>if let view = self.view as! SKView? {</code> line:<br /><pre><code><span class="comment">//</span> <span class="comment">1.</span> <span class="comment">create</span> <span class="comment">an</span> <span class="comment">instance</span> <span class="comment">of</span> <span class="comment">the</span> <span class="comment">SwiftUI</span> <span class="comment">view</span> <span class="comment">we</span> <span class="comment">just</span> <span class="comment">added</span> <span class="comment">to</span> <span class="comment">the</span> <span class="comment">project</span><br /><span class="keyword">let</span> gameUI = <span class="type">GameUIView</span>()<br /><span class="comment">//</span> <span class="comment">2.</span> <span class="comment">embed</span> <span class="comment">this</span> <span class="comment">view</span> <span class="comment">into</span> <span class="comment">a</span> <span class="comment">ViewController</span><br /><span class="keyword">let</span> uiController = <span class="type">UIHostingController</span>(rootView: gameUI)<br /><span class="comment">//</span> <span class="comment">3.</span> <span class="comment">add</span> <span class="comment">the</span> <span class="comment">uiController</span> <span class="comment">as</span> <span class="comment">a</span> <span class="comment">child</span> <span class="comment">ViewController</span> <span class="comment">to</span> <span class="comment">this</span> <span class="comment">one</span><br /><span class="call">addChild</span>(uiController)<br />                        <br />            <br /><span class="comment">//</span> <span class="comment">4.</span> <span class="comment">set</span> <span class="comment">the</span> <span class="comment">SwiftUI</span> <span class="comment">view</span> <span class="comment">controller's</span> <span class="comment">frame</span> <span class="comment">to</span> <span class="comment">be</span> <span class="comment">the</span> <span class="comment">same</span> <span class="comment">size</span> <span class="comment">as</span> <span class="comment">the</span> <span class="comment">SpriteKit</span> <span class="comment">view</span><br />uiController.<span class="property">view</span>.<span class="property">frame</span> = view.<span class="property">frame</span><br /><span class="comment">//</span> <span class="comment">5.</span> <span class="comment">set</span> <span class="comment">the</span> <span class="comment">background</span> <span class="comment">color</span> <span class="comment">to</span> <span class="comment">transparant,</span> <span class="comment">otherwise</span> <span class="comment">the</span> <span class="comment">SwiftUI</span> <span class="comment">view</span> <span class="comment">contains</span> <span class="comment">the</span> <span class="comment">standard</span> <span class="comment">white</span> <span class="comment">background,</span> <span class="comment">obscuring</span> <span class="comment">the</span> <span class="comment">SpriteKit</span> <span class="comment">view</span><br />uiController.<span class="property">view</span>.<span class="property">backgroundColor</span> = <span class="type">UIColor</span>.<span class="property">clear</span><br /><span class="comment">//</span> <span class="comment">6.</span> <span class="comment">add</span> <span class="comment">the</span> <span class="comment">SwiftUI</span> <span class="comment">view</span> <span class="comment">as</span> <span class="comment">a</span> <span class="comment">subview</span> <span class="comment">to</span> <span class="comment">the</span> <span class="comment">SpriteKit</span> <span class="comment">view</span><br />view.<span class="call">addSubview</span>(uiController.<span class="property">view</span>)</code></pre><br />Build and run the app, and you will see the default SwiftUI "Hello, World" view on top of the SpriteKit game. Congrats, because this is 90% of the integration done!<br /><br /><img class="imageStyle" alt="SwiftUI on top of SpriteKit!" src="schermafbeelding-2019-10-31-om-07.39.40.png" width="248" height="437" /><br /><br /><h2>Step 2: how high is your stack?</h2><br />Let's add a text view showing the maximum height of our stack.<br /><br /><h3>Step 2a: preparing the data</h3><br />First, we need our GameScene (that holds all game logic for this simple game) to be able to determine the stacks maximum height. <br /><br />Open <code>GameScene.swift</code><br /><br />Start by adding SwiftUI to the list of imports. Then add protocol <code>ObservableObject</code> to the class:<br /><pre><code><span class="keyword">import</span> SpriteKit<br /><span class="keyword">import</span> GameplayKit<br /><span class="keyword">import</span> SwiftUI<br /><br /><span class="keyword">class</span> GameScene: <span class="type">SKScene</span>, <span class="call">ObservableObject</span> {</code></pre><br />Below line <pre><code><span class="keyword">var</span> spawnedBlocks = [<span class="type">SKSpriteNode</span>]()</code></pre> add the following property:<br /><pre><code><span class="comment">//</span> <span class="comment">this</span> <span class="comment">property</span> <span class="comment">will</span> <span class="comment">be</span> <span class="comment">observed</span> <span class="comment">by</span> <span class="comment">SwiftUI</span> <span class="comment">view</span> <span class="comment">for</span> <span class="comment">changes</span> <span class="comment">to</span> <span class="comment">show</span> <span class="comment">the</span> <span class="comment">maximum</span> <span class="comment">tower</span> <span class="comment">height.</span><br /><span class="keyword">@Published</span> <span class="keyword">var</span> maxTowerHeight: <span class="type">Double</span> = <span class="number">0</span></code></pre><br />This creates a property holding the height of the stack. Adding the <code>@Published </code>modifier let's SwiftUI know that we want to be notified when this property changes. Perfect!<br /><br />Now, this property needs to be filled with data. Go down to the <code><span class="keyword">override</span> <span class="keyword">func</span> update(<span class="keyword">_</span> currentTime: <span class="type">TimeInterval</span>)</code> method and at the bottom of the function, add the following code:<br /><pre><code><span class="comment">//</span> <span class="comment">calculate</span> <span class="comment">towerHeight,</span> <span class="comment">(not</span> <span class="comment">very</span> <span class="comment">accurate)</span><br /><span class="keyword">for</span> block <span class="keyword">in</span> spawnedBlocks {<br />    <span class="comment">//</span> <span class="comment">we</span> <span class="comment">only</span> <span class="comment">count</span> <span class="comment">blocks</span> <span class="comment">that</span> <span class="comment">are</span> <span class="comment">not</span> <span class="comment">moving</span> <span class="comment">(i.e.</span> <span class="comment">resting),</span> <span class="comment">don't</span> <span class="comment">mind</span> <span class="comment">the</span> <span class="comment">nil</span> <span class="comment">coalescence</span> <span class="comment">here</span><br />    <span class="comment">//</span> <span class="comment">we</span> <span class="comment">set</span> <span class="comment">the</span> <span class="comment">maxTowerHeight</span> <span class="comment">to</span> <span class="comment">the</span> <span class="comment">y-position</span> <span class="comment">of</span> <span class="comment">a</span> <span class="comment">resting</span> <span class="comment">block</span> <span class="comment">if</span> <span class="comment">it's</span> <span class="comment">higher</span> <span class="comment">than</span> <span class="comment">the</span> <span class="comment">current</span> <span class="comment">maxTowerHeight</span><br />    <span class="comment">//</span> <span class="comment">this</span> <span class="comment">is</span> <span class="comment">not</span> <span class="comment">perfect:</span> <span class="comment">it</span> <span class="comment">measures</span> <span class="comment">from</span> <span class="comment">the</span> <span class="comment">midpoint</span> <span class="comment">of</span> <span class="comment">the</span> <span class="comment">block</span> <span class="comment">and</span> <span class="comment">doesn't</span> <span class="comment">take</span> <span class="comment">shape</span> <span class="comment">into</span> <span class="comment">account.</span><br />    <span class="comment">//</span> <span class="comment">typecasting</span> <span class="comment">is</span> <span class="comment">required</span> <span class="comment">here.</span><br />    <span class="keyword">if</span> (block.<span class="property">physicsBody</span>?.<span class="property">isResting</span> ?? <span class="keyword">false</span>) && <span class="type">Double</span>(block.<span class="property">position</span>.<span class="property">y</span>) &gt; maxTowerHeight {<br />        maxTowerHeight = <span class="type">Double</span>(block.<span class="property">position</span>.<span class="property">y</span>)<br />    }<br />}</code></pre><br />This method simply updates the maximum height of the tower each turn. Although not perfect, it's good enough for demonstration purposes.<br /><br />Let's show this value in SwiftUI!<br /><br /><h3>Step 2b: Showing the data</h3><br />Open <code>GameUIView.swift</code> and add the following property:<br /><pre><code><span class="keyword">@ObservedObject</span> <span class="keyword">var</span> gameScene: <span class="type">GameScene</span></code></pre><br />Now, your code will no longer compile. Both the Preview and <code>GameScene.swift</code> will complain. Fix these first.<br /><br />In <code>GameUIView.swift</code>, change<br /><pre><code><span class="keyword">struct</span> GameUIView_Previews: <span class="type">PreviewProvider</span> {<br />    <span class="keyword">static</span> <span class="keyword">var</span> previews: some <span class="type">View</span> {<br />        <span class="type">GameUIView</span>()<br />    }<br />}</code></pre><br />to:<br /><pre><code><span class="keyword">struct</span> GameUIView_Previews: <span class="type">PreviewProvider</span> {<br />    <span class="keyword">static</span> <span class="keyword">var</span> previews: some <span class="type">View</span> {<br />        <span class="type">GameUIView</span>(gameScene: <span class="type">GameScene</span>())<br />    }<br />}</code></pre><br />And in <code>GameViewController.swift</code>, change line:<br /><pre><code><span class="keyword">let</span> gameUI = <span class="type">GameUIView</span>()</code></pre> to line:<br /><pre><code><span class="keyword">let</span> gameUI = <span class="type">GameUIView</span>(gameScene: scene)</code></pre><br />Finally, in <code>GameUIView.swift</code>, change line:<br /><pre><code><span class="type">Text</span>(<span class="string">"Hello,</span> <span class="string">World!"</span>)</code></pre> to line:<br /><pre><code><span class="type">Text</span>(<span class="string">"Tower</span> <span class="string">height:</span> \(gameScene.<span class="property">maxTowerHeight</span>)<span class="string">"</span>).<span class="call">font</span>(.<span class="dotAccess">largeTitle</span>)</code></pre><br /><br /><img class="imageStyle" alt="High tower!" src="schermafbeelding-2019-10-31-om-21.13.19.png" width="252" height="437" /><br /><br />I know, won't win any beauty awards, but at least getting data from the game to SwiftUI is working. And it updates automatically, without that much code!<br /><br /><h2>Step 3: Pause menu</h2><br />Implementing a pauze menu is not that much more difficult. Here goes!<br /><br />First, go back to <code>GameScene.swift</code>, because we need another property (add it right after <code>maxTowerHeight</code>:<br /><pre><code><span class="comment">//</span> <span class="comment">we'll</span> <span class="comment">use</span> <span class="comment">this</span> <span class="comment">property</span> <span class="comment">as</span> <span class="comment">a</span> <span class="comment">"wrapper"</span> <span class="comment">for</span> <span class="comment">the</span> <span class="comment">existing</span> <span class="comment">SKScene.isPaused</span> <span class="comment">property</span> <span class="comment">so</span> <span class="comment">we</span> <span class="comment">can</span> <span class="comment">make</span> <span class="comment">it</span> <span class="comment">published.</span> <span class="comment">We'll</span> <span class="comment">also</span> <span class="comment">sync</span> <span class="comment">it's</span> <span class="comment">value</span> <span class="comment">to</span> <span class="comment">the</span> <span class="comment">actual</span> <span class="comment">isPaused</span> <span class="comment">property</span> <span class="comment">so</span> <span class="comment">we</span> <span class="comment">immediately</span> <span class="comment">get</span> <span class="comment">pausing</span> <span class="comment">behaviour.</span><br /><span class="keyword">@Published</span> <span class="keyword">var</span> gameIsPaused = <span class="keyword">false</span> {<br />    <span class="keyword">didSet</span> {<br />        isPaused = gameIsPaused<br />    }<br />}</code></pre><br />Second, let's create a <code>restart()</code> function that resets the game state. Add this at the end of the <code>GameScene</code> class:<br /><pre><code><span class="comment">//</span> <span class="comment">restart</span> <span class="comment">the</span> <span class="comment">game</span><br /><span class="keyword">func</span> restart() {<br />    <span class="comment">//</span> <span class="comment">1:</span> <span class="comment">remove</span> <span class="comment">the</span> <span class="comment">blocks</span> <span class="comment">from</span> <span class="comment">the</span> <span class="comment">scene</span><br />    <span class="call">removeChildren</span>(in: spawnedBlocks)<br />    <span class="comment">//</span> <span class="comment">2:</span> <span class="comment">remove</span> <span class="comment">the</span> <span class="comment">blocks</span> <span class="comment">from</span> <span class="comment">the</span> <span class="comment">spawnedBlocks</span> <span class="comment">array</span><br />    <span class="comment">//</span>  <span class="comment">this</span> <span class="comment">triggers</span> <span class="comment">their</span> <span class="comment">cleanup</span><br />    <span class="comment">//</span>  <span class="comment">they</span> <span class="comment">will</span> <span class="comment">be</span> <span class="comment">replaced</span> <span class="comment">as</span> <span class="comment">per</span> <span class="comment">the</span> <span class="comment">Update</span> <span class="comment">function</span><br />    spawnedBlocks.<span class="call">removeAll</span>()<br />    <span class="comment">//</span> <span class="comment">3:</span> <span class="comment">reset</span> <span class="comment">the</span> <span class="comment">tower</span> <span class="comment">height</span><br />    maxTowerHeight = <span class="number">0</span><br />}</code></pre><br />From a logic point of view, these are all the changes we need.<br /><br />In <code>GameUIView.swift</code>, we can use this property to:<br /><ol class="arabic-numbers"><li>Determine whether the game is paused and the pause menu should be shown;</li><li>Change the value of this property based on what the player chooses.</li></ol><br />Note: you can format the view as you see fit. This is a quick and dirty example for demonstration purposes only. Please note the commented lines as these show the integration between the GameScene (SpriteKit) and GameUIView (SwiftUI):<br /><pre><code><span class="keyword">var</span> body: some <span class="type">View</span> {<br />    <span class="type">ZStack</span> {<br />        <span class="comment">//</span> <span class="comment">The</span> <span class="comment">if</span> <span class="comment">statement</span> <span class="comment">determines</span> <span class="comment">what</span> <span class="comment">is</span> <span class="comment">shown</span> <span class="comment">in</span> <span class="comment">the</span> <span class="comment">view:</span> <span class="comment">either</span> <span class="comment">the</span> <span class="comment">pause</span> <span class="comment">menu</span><br />        <span class="comment">//</span> <span class="comment">or</span> <span class="comment">a</span> <span class="comment">"Pause"</span> <span class="comment">symbol</span> <span class="comment">and</span> <span class="comment">the</span> <span class="comment">maximum</span> <span class="comment">tower</span> <span class="comment">height.</span><br />        <span class="keyword">if</span> gameScene.<span class="property">gameIsPaused</span> {<br />            <span class="type">Color</span>.<span class="property">red</span>.<span class="call">opacity</span>(<span class="number">0.5</span>)<br />            <span class="type">VStack</span> {<br />                <span class="type">VStack</span> {<br />                    <span class="type">Text</span>(<span class="string">"Paused"</span>)<br />                    <span class="type">Button</span>(<span class="string">"Continue"</span>) {<br />                        <span class="comment">//</span> <span class="comment">when</span> <span class="comment">the</span> <span class="comment">continue</span> <span class="comment">button</span> <span class="comment">is</span> <span class="comment">pressed,</span> <span class="comment">we</span> <span class="comment">unpause</span> <span class="comment">the</span> <span class="comment">game</span><br />                        <span class="keyword">self</span>.<span class="property">gameScene</span>.<span class="property">gameIsPaused</span> = <span class="keyword">false</span><br />                    }<br />                    <span class="type">Button</span>(<span class="string">"Restart"</span>) {<br />                        <span class="comment">//</span> <span class="comment">when</span> <span class="comment">the</span> <span class="comment">restart</span> <span class="comment">button</span> <span class="comment">is</span> <span class="comment">pressed,</span> <span class="comment">we</span> <span class="comment">call</span> <span class="comment">the</span> <span class="comment">GameScene's</span> <span class="comment">restart</span> <span class="comment">function</span> <span class="comment">and</span> <span class="comment">unpause</span> <span class="comment">the</span> <span class="comment">game.</span><br />                        <span class="keyword">self</span>.<span class="property">gameScene</span>.<span class="call">restart</span>()<br />                        <span class="keyword">self</span>.<span class="property">gameScene</span>.<span class="property">gameIsPaused</span> = <span class="keyword">false</span><br />                    }<br />                }.<span class="call">font</span>(.<span class="dotAccess">largeTitle</span>)<br />                .<span class="dotAccess">padding</span>()<br />                .<span class="dotAccess">background</span>(<span class="type">Color</span>.<span class="property">green</span>.<span class="call">opacity</span>(<span class="number">0.5</span>))<br />                    .<span class="dotAccess">clipShape</span>(<span class="type">RoundedRectangle</span>(cornerRadius: <span class="type">CGFloat</span>(<span class="number">10</span>)))<br />            }.<span class="call">transition</span>(.<span class="dotAccess">slide</span>)<br />        } <span class="keyword">else</span> {<br />            <span class="comment">//</span> <span class="comment">this</span> <span class="comment">part</span> <span class="comment">of</span> <span class="comment">the</span> <span class="comment">view</span> <span class="comment">is</span> <span class="comment">shown</span> <span class="comment">when</span> <span class="comment">the</span> <span class="comment">game</span> <span class="comment">is</span> <span class="comment">not</span> <span class="comment">paused</span><br />            <span class="type">VStack</span> {<br />                <span class="type">HStack</span> {<br />                    <span class="type">Spacer</span>()<br />                    <span class="comment">//</span> <span class="comment">This</span> <span class="comment">shows</span> <span class="comment">a</span> <span class="comment">"pause"</span> <span class="comment">button,</span> <span class="comment">and</span> <span class="comment">pauses</span> <span class="comment">the</span> <span class="comment">game</span> <span class="comment">when</span> <span class="comment">clicked.</span><br />                    <span class="type">Button</span>(action: { <span class="keyword">self</span>.<span class="property">gameScene</span>.<span class="property">gameIsPaused</span> = <span class="keyword">true</span> }) {<br />                        <span class="type">Text</span>(<span class="string">"<span style="font:12px AppleColorEmoji; ">⏸</span>"</span>).<span class="call">font</span>(.<span class="dotAccess">largeTitle</span>).<span class="call">padding</span>()<br />                    }<br />                }<br />                <span class="comment">//</span> <span class="comment">this</span> <span class="comment">shows</span> <span class="comment">the</span> <span class="comment">tower</span> <span class="comment">height</span><br />                <span class="type">Text</span>(<span class="string">"Tower</span> <span class="string">height:</span> \(gameScene.<span class="property">maxTowerHeight</span>)<span class="string">"</span>).<span class="call">font</span>(.<span class="dotAccess">largeTitle</span>)<br />                <span class="type">Spacer</span>()<br />            }.<span class="call">transition</span>(.<span class="dotAccess">slide</span>)<br />        }<br />    }<br />}</code></pre><br />Build and run the game. You will see you can now pause and unpause the game and restart the game from the pause menu.<br /><br /><img class="imageStyle" alt="Pause menu" src="schermafbeelding-2019-10-31-om-21.24.33.png" width="252" height="437" /><img class="imageStyle" alt="Game screen (unpaused)" src="schermafbeelding-2019-10-31-om-21.24.41.png" width="252" height="437" /><br /><br />And that's all there is to integrating SpriteKit and SwiftUI!<br /><br /><h2>Key take-aways</h2><br /><br /><ul class="disc"><li>Yes, you can use SwiftUI as a UI for a SpriteKit game;</li><li>It's easy to connect game state to SwiftUI, both for showing as well as changing state;</li><li>Use <code>UIHostingController</code>/<code>NSHostingController</code> to overlay or embed a SwiftUI view in a SpriteKit app. Note: on macOS, you can also use <code>NSHostingView</code>*. </li></ul><br /><br />* See this code as an example (from within a <code>viewDidLoad</code> function within a ViewController):<br /><pre><code><span class="keyword">let</span> gui = <span class="type">GameUIView</span>()<br /><span class="keyword">let</span> guiView = <span class="type">NSHostingView</span>(rootView: gui)    <br />guiView.<span class="property">frame</span> = view.<span class="property">frame</span><br />view.<span class="call">addSubview</span>(guiView)</code></pre><br />Note that you don't need to set transparency in this case.<br /><br /><br /></div></div>
	</div>
	

                    </div>

                    <div class="col-sm-3 sidebar">
                        <h2></h2>
                         <div id="blog-categories"><a href="category-alakajam.html" class="blog-category-link-enabled">Alakajam</a><br /><a href="category-experiments.html" class="blog-category-link-enabled">Experiments</a><br /><a href="category-hexengine.html" class="blog-category-link-enabled">HexEngine</a><br /><a href="category-ink.html" class="blog-category-link-enabled">Ink</a><br /><a href="category-ludum-dare.html" class="blog-category-link-enabled">Ludum Dare</a><br /><a href="category-rpg.html" class="blog-category-link-enabled">RPG</a><br /><a href="category-space-sim.html" class="blog-category-link-enabled">Space Sim</a><br /><a href="category-spritekit.html" class="blog-category-link-enabled">SpriteKit</a><br /><a href="category-swift.html" class="blog-category-link-enabled">Swift</a><br /><a href="category-vapor.html" class="blog-category-link-enabled">Vapor</a><br /><a href="category-zen-bwv.html" class="blog-category-link-enabled">Zen BWV</a><br /></div><div id="blog-archives"><a class="blog-archive-link-enabled" href="archive-january-2021.html">January 2021</a><br /><a class="blog-archive-link-enabled" href="archive-april-2020.html">April 2020</a><br /><a class="blog-archive-link-enabled" href="archive-december-2019.html">December 2019</a><br /><a class="blog-archive-link-enabled" href="archive-october-2019.html">October 2019</a><br /><a class="blog-archive-link-enabled" href="archive-june-2019.html">June 2019</a><br /><a class="blog-archive-link-enabled" href="archive-january-2019.html">January 2019</a><br /><a class="blog-archive-link-enabled" href="archive-october-2018.html">October 2018</a><br /><a class="blog-archive-link-enabled" href="archive-september-2018.html">September 2018</a><br /><a class="blog-archive-link-enabled" href="archive-august-2018.html">August 2018</a><br /><a class="blog-archive-link-enabled" href="archive-july-2018.html">July 2018</a><br /><a class="blog-archive-link-enabled" href="archive-december-2017.html">December 2017</a><br /><a class="blog-archive-link-enabled" href="archive-july-2017.html">July 2017</a><br /><a class="blog-archive-link-enabled" href="archive-march-2017.html">March 2017</a><br /><a class="blog-archive-link-enabled" href="archive-february-2017.html">February 2017</a><br /><a class="blog-archive-link-enabled" href="archive-january-2017.html">January 2017</a><br /><a class="blog-archive-link-enabled" href="archive-october-2016.html">October 2016</a><br /><a class="blog-archive-link-enabled" href="archive-august-2016.html">August 2016</a><br /><a class="blog-archive-link-enabled" href="archive-july-2016.html">July 2016</a><br /></div><div id="blog-rss-feeds"><a class="blog-rss-link" href="feed.xml" rel="alternate" type="application/rss+xml" title="thedreamweb.eu Devlog">RSS Feed</a><br /></div>
                    </div>
                </div>
			</div>
		</section>
	</div>

	<div class="footer">
		<div class="container">
			<div class="row">
				<div class="col">
					<ul class="navbar-nav ml-auto"><li class="nav-item"><a href="../../" rel="" class="nav-link">Home</a></li><li class="nav-item"><a href="../../Gem Stackers/" rel="" class="nav-link">Gem Stackers</a></li><li class="nav-item"><a href="../../TwinkleStar/" rel="" class="nav-link">Twinkle Star</a></li><li class="nav-item"><a href="../../games/" rel="" class="nav-link">Other Games</a></li><li class="nav-item active"><a href="../" rel="" class="nav-link">Devlog</a></li></ul>
					&copy; 2018-2021 Maarten Engels, thedreamweb.eu <a href="#" id="rw_email_contact">Contact Me</a><script type="text/javascript">var _rwObsfuscatedHref0 = "mai";var _rwObsfuscatedHref1 = "lto";var _rwObsfuscatedHref2 = ":ma";var _rwObsfuscatedHref3 = "art";var _rwObsfuscatedHref4 = "en@";var _rwObsfuscatedHref5 = "the";var _rwObsfuscatedHref6 = "dre";var _rwObsfuscatedHref7 = "amw";var _rwObsfuscatedHref8 = "eb.";var _rwObsfuscatedHref9 = "eu";var _rwObsfuscatedHref = _rwObsfuscatedHref0+_rwObsfuscatedHref1+_rwObsfuscatedHref2+_rwObsfuscatedHref3+_rwObsfuscatedHref4+_rwObsfuscatedHref5+_rwObsfuscatedHref6+_rwObsfuscatedHref7+_rwObsfuscatedHref8+_rwObsfuscatedHref9; document.getElementById("rw_email_contact").href = _rwObsfuscatedHref;</script>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="../../rw_common/themes/Future/js/main.js?rwcache=681217867"></script>
<div id="rapidweaver_privacy_message">
    <p><span style="font-size:14px; ">We value your privacy. This site collects only information required to provide you this Service. For more information, read our <a href="privacy/index.html">privacy policy</a>.</span></p>
    <button id="rapidweaver_privacy_message_dismiss_button">Dismiss</button>
</div>

<script src="../../rw_common/assets/message.js?rwcache=681217867"></script>
</body>

</html>